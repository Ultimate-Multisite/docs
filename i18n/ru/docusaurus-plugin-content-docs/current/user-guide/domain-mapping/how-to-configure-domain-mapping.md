---
title: Как настроить привязку домена
sidebar_position: 6
_i18n_hash: 749818bf3eca7ddb6e6bfae1ddb7926f
---
# Как настроить привязку домена (v2)

_**ВАЖНОЕ ЗАМЕЧАНИЕ: Эта статья относится к версии Ultimate Multisite 2.x.**_

Одной из самых мощных функций премиум-сети является возможность предложить нашим клиентам возможность привязать домен верхнего уровня к их сайтам. В конце концов, какой выглядит более профессионально: [_**joesbikeshop.yournetwork.com**_](http://joesbikeshop.yournetwork.com) или [_**joesbikeshop.com**_](http://joesbikeshop.com)? Именно поэтому Ultimate Multisite предлагает эту функцию встроенной, без необходимости использовать сторонние плагины.

## Что такое привязка домена?

Как следует из названия, привязка домена — это возможность, предлагаемая Ultimate Multisite, принимать запрос на пользовательский домен и сопоставлять этот запрос с соответствующим сайтом в сети, к которому привязан данный домен.

### Как настроить привязку домена в вашей сети Ultimate Multisite

Для работы привязки домена требуется некоторая настройка с вашей стороны. К счастью, Ultimate Multisite автоматизирует трудную работу, чтобы вы могли легко выполнить требования.

Во время установки Ultimate Multisite мастер автоматически скопирует и установит файл **sunrise.php** в назначенную папку. **Мастер не позволит вам продолжить до завершения этого шага**.

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-file-zrBdFs13Dy.png)

Это означает, что как только мастер установки Ultimate Multisite завершит настройку вашей сети, вы можете сразу начать привязывать пользовательский домен.

Обратите внимание, что привязка домена в Ultimate Multisite не обязательна. У вас есть возможность использовать нативную функцию привязки домена WordPress Multisite или любое другое решение для привязки доменов.

Если вам нужно отключить привязку домена Ultimate Multisite, чтобы уступить место другим решениям для привязки доменов, вы можете отключить эту функцию в **Ultimate Multisite > Settings > Domain Mapping**.

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-file-bbrC47pTcX.png)

Ниже этого параметра вы также увидите опцию **Force Admin Redirect**. Эта опция позволяет вам контролировать, смогут ли ваши клиенты получить доступ к своей админ-панели как на их пользовательском домене, так и на поддомене, или только на одном из них.

Если вы выберете **Force redirect to mapped domain**, ваши клиенты смогут получить доступ к своей админ-панели только на их пользовательских доменах.

Опция **Force redirect to** **network domain** сделает ровно противоположное — ваши клиенты смогут получить доступ к своим панелям только на поддомене, даже если попытаются войти на их пользовательские домены.

А опция **Allow access to the admin by both mapped domain domain and network domain** позволяет им получать доступ к админ-панелям как на поддомене, так и на пользовательском домене.

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-file-JYwHPWhYwV.png)

Существует два способа привязки пользовательского домена. Первый — привязка имени домена из панели администратора сети в качестве супер‑администратора, а второй — через панель администратора подсайта на странице аккаунта.

Но прежде чем вы начнете привязывать пользовательский домен к одному из подсайтов в вашей сети, вам нужно убедиться, что **настройки DNS** имени домена правильно настроены.

### Убедитесь, что настройки DNS домена правильно настроены

Для того чтобы привязка работала, вы должны убедиться, что домен, который вы планируете привязать, указывает на IP‑адрес вашей сети. Обратите внимание, что вам нужен IP‑адрес сети — IP‑адрес домена, на котором установлен Ultimate Multisite, а не IP‑адрес пользовательского домена, который вы хотите привязать. Чтобы найти IP‑адрес конкретного домена, мы предлагаем перейти на [Site24x7](https://www.site24x7.com/find-ip-address-of-web-site.html), например.

Чтобы правильно привязать домен, вам нужно добавить **A RECORD** в вашу конфигурацию **DNS**, указывающую на этот **IP‑адрес**. Управление DNS сильно различается у разных регистраторов доменов, но существует множество онлайн‑руководств, которые охватывают это, если вы ищете «_Creating A Record on XXXX_», где XXXX — ваш регистратор доменов (например, «_Creating A Record on_ _GoDaddy_»).

Если у вас возникли проблемы с настройкой, **обратитесь в службу поддержки вашего регистратора доменов**, и они смогут помочь вам с этой частью.

Если вы планируете позволить вашим клиентам привязывать собственные домены, им придется выполнять эту работу самостоятельно. Направьте их к системе поддержки их регистратора, если они не смогут создать A Record.

### Привязка пользовательского домена как супер‑администратор

Когда вы вошли в систему как супер‑администратор сети, вы можете легко добавлять и управлять пользовательскими доменами, перейдя в **Ultimate Multisite > Domains**.

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-file-5XxtXP622s.png)

На этой странице вы можете нажать кнопку **Add Domain** вверху, и откроется модальное окно, где вы можете задать и заполнить **custom domain name**, **подсайт**, к которому хотите применить пользовательский домен, и решить, хотите ли вы установить его как **primary domain** или нет (обратите внимание, что вы можете привязать **несколько доменов к одному подсайту**).

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-file-rD6fnbzRe9.png)

После ввода всей информации вы можете нажать кнопку **Add Existing Domain** внизу.

Это запустит процесс проверки и получения информации DNS пользовательского домена. Вы также увидите журнал внизу страницы, чтобы следить за процессом. Этот процесс может занять несколько минут.

**Stage** или статус должен измениться с **Checking DNS** на **Ready**, если всё настроено правильно.

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-3g2mkrlk75we98uhscagnr3ini0s)

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-file-5dIPdYQfZi.png)

Если вы нажмете на имя домена, вы сможете увидеть некоторые опции внутри него. Давайте быстро посмотрим на них:

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-file-5tCiNUIKih.png)

**Stage:** Это стадия, на которой находится домен. Когда вы впервые добавляете домен, он, вероятно, будет находиться на стадии **Checking DNS**. Процесс проверит записи DNS и подтвердит, что они правильные. Затем домен перейдет на стадию **Checking SSL**. Ultimate Multisite проверит, есть ли у домена SSL, и классифицирует ваш домен как **Ready** или **Ready (without SSL)**.

**Site:** Поддомен, связанный с этим доменом. Привязанный домен покажет содержимое этого конкретного сайта.

**Active:** Вы можете включить или отключить эту опцию, чтобы активировать или деактивировать домен.

**Is Primary Domain?:** Ваши клиенты могут иметь более одного привязанного домена для каждого сайта. Используйте эту опцию, чтобы выбрать, является ли это основным доменом для конкретного сайта.

**Is Secure?:** Хотя Ultimate Multisite проверяет наличие SSL‑сертификата у домена перед его включением, вы можете вручную выбрать загрузку домена с SSL или без него. Обратите внимание, что если у сайта нет SSL‑сертификата и вы попытаетесь принудительно загрузить его с SSL, это может вызвать ошибки.

### Привязка пользовательского домена как пользователь подсайта

Администраторы подсайтов также могут привязывать пользовательские домены из панели администратора подсайта.

Сначала убедитесь, что вы включили эту опцию в настройках **Domain mapping**. См. скриншот ниже.

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-file-M3MO6RKBWe.png)

Вы также можете установить или настроить эту опцию на уровне **Plan** или в опциях продукта в **Ultimate Multisite > Products**.

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-file-JRqx7Uhqsa.png)

Когда любая из этих опций включена и пользователь подсайта разрешено привязывать пользовательские домены, пользователь подсайта должен увидеть метабокс на странице **Account** под названием **Domains**.

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-file-DUeHUY66yP.png)

Пользователь может нажать кнопку **Add Domain**, и откроется модальное окно с некоторыми инструкциями.

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-file-n5mNhDpL38.png)

Пользователь затем может нажать **Next Step** и продолжить добавление пользовательского домена. Он также может выбрать, будет ли это основным доменом или нет.

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-file-0vlbs2dcaz.png)

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-zez2zeiqz8mi67o7izkg3d7x43ve)Нажатие **Add Domain** начнет процесс проверки и получения информации DNS пользовательского домена.

### О синхронизации доменов

Domain Syncing — это процесс, при котором Ultimate Multisite добавляет пользовательское имя домена в ваш хостинг‑аккаунт в качестве дополнительного домена **для работы привязки домена**.

Синхронизация доменов происходит автоматически, если ваш хостинг‑провайдер имеет интеграцию с функцией привязки доменов Ultimate Multisite. В настоящее время такими хостинг‑провайдерами являются _Runcloud, Closte, WP Engine, Gridpane, WPMU Dev, Cloudways_ и _Cpanel_.

Вам нужно активировать эту интеграцию в настройках Ultimate Multisite во вкладке **Integration**.

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-k6i46r4x2yddii0op4x343jizq20)

![](https://wp-ultimo-space.fra1.cdn.digitaloceanspaces.com/hs-file-JMADuxaH62.png)

_Обратите внимание, что если ваш хостинг‑провайдер не является одним из упомянутых выше, **вам понадобится вручную синхронизировать или добавить имя домена** в ваш хостинг‑аккаунт._
