---
title: Интеграция ServerPilot
sidebar_position: 16
_i18n_hash: fdbdebe91bc1687b519dc0986de244d3
---
# ServerPilot Integration

## Обзор
ServerPilot — это облачный сервис для размещения сайтов WordPress и других PHP‑сайтов на серверах DigitalOcean, Amazon, Google или любого другого провайдера серверов. Эта интеграция обеспечивает автоматическую синхронизацию доменов и управление SSL‑сертификатами между Ultimate Multisite и ServerPilot.

## Функции
- Автоматическая синхронизация доменов
- Управление SSL‑сертификатами с Let's Encrypt
- Автоматическое продление SSL

## Требования
В файле `wp-config.php` необходимо определить следующие константы:

```php
define('WU_SERVER_PILOT_CLIENT_ID', 'your_client_id');
define('WU_SERVER_PILOT_API_KEY', 'your_api_key');
define('WU_SERVER_PILOT_APP_ID', 'your_app_id');
```

## Инструкции по настройке

### 1. Получите свои учетные данные API ServerPilot
1. Войдите в панель управления ServerPilot  
2. Перейдите в «Account» > «API»  
3. Создайте новый ключ API, если у вас его еще нет  
4. Скопируйте ваш Client ID и API Key  

### 2. Получите ваш App ID
1. В панели управления ServerPilot перейдите в «Apps»  
2. Выберите приложение, где размещен ваш WordPress multisite  
3. App ID виден в URL: `https://manage.serverpilot.io/apps/{APP_ID}`  

### 3. Добавьте константы в wp-config.php
Добавьте следующие константы в ваш файл `wp-config.php`:

```php
define('WU_SERVER_PILOT_CLIENT_ID', 'your_client_id');
define('WU_SERVER_PILOT_API_KEY', 'your_api_key');
define('WU_SERVER_PILOT_APP_ID', 'your_app_id');
```

### 4. Включите интеграцию
1. В админке WordPress перейдите в Ultimate Multisite > Settings  
2. Перейдите на вкладку «Domain Mapping»  
3. Прокрутите вниз до «Host Integrations»  
4. Включите интеграцию ServerPilot  
5. Нажмите «Save Changes»

## Как это работает

### Синхронизация доменов
Когда домен привязан в Ultimate Multisite:
1. Интеграция получает текущий список доменов из ServerPilot  
2. Она добавляет новый домен в список (включая www‑версию, если применимо)  
3. Отправляет обновленный список в ServerPilot через API  
4. ServerPilot обновляет список доменов для вашего приложения  

### Управление SSL‑сертификатами
После синхронизации доменов:
1. Интеграция автоматически включает AutoSSL для вашего приложения  
2. ServerPilot обрабатывает выдачу и установку SSL‑сертификата с помощью Let's Encrypt  
3. ServerPilot также обрабатывает автоматическое продление SSL‑сертификатов  

## Проверка SSL‑сертификата
Интеграция настроена на увеличение количества попыток проверки SSL‑сертификата для ServerPilot, поскольку ServerPilot может потребовать некоторое время для выдачи и установки сертификатов. По умолчанию будет предпринято до 5 попыток, но это можно настроить с помощью фильтров.

## Устранение неполадок

### Проблемы с подключением к API
- Убедитесь, что ваш Client ID и API Key корректны  
- Убедитесь, что ваш App ID корректен  
- Убедитесь, что у вашего аккаунта ServerPilot есть необходимые разрешения  

### Проблемы с SSL‑сертификатом
- ServerPilot требует, чтобы домены имели действительные DNS‑записи, указывающие на ваш сервер, прежде чем выдавать SSL‑сертификаты  
- Если SSL‑сертификаты не выдаются, проверьте, что ваши домены правильно указывают на IP‑адрес вашего сервера  
- ServerPilot может потребовать некоторое время для выдачи и установки сертификатов (обычно 5–15 минут)  

### Домен не добавлен
- Проверьте логи Ultimate Multisite на наличие ошибок  
- Убедитесь, что домен еще не добавлен в ServerPilot  
- Убедитесь, что ваш тарифный план ServerPilot поддерживает количество добавляемых доменов  

### Удаление домена
В настоящее время API ServerPilot не предоставляет способа удалить отдельные домены. Когда привязка домена удаляется в Ultimate Multisite, интеграция обновит список доменов в ServerPilot, исключив удаленный домен.
