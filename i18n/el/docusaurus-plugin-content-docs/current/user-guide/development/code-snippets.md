---
title: Αποσπάσματα Κώδικα
sidebar_position: 1
_i18n_hash: 2284b14474d86f665fa7c84cc305553e
---
# Αποσπάσματα κώδικα για v2

Βασικά, τα αποσπάσματα κώδικα για **WordPress** χρησιμοποιούνται για να εκτελέσουν συγκεκριμένες ενέργειες που διαφορετικά θα απαιτούσαν ένα ξεχωριστό μικρότερο plugin. Τέτοια αποσπάσματα κώδικα τοποθετούνται σε ένα από τα αρχεία του πυρήνα του WordPress ή του θέματος (γενικά στο αρχείο functions.php του θέματός σας) ή μπορούν να χρησιμοποιηθούν ως MU plugin.

Σε αυτό το άρθρο θα σας δείξουμε τρία αποσπάσματα κώδικα που μπορούν να χρησιμοποιηθούν με το **Ultimate Multisite v2**:

  * [**Αλλαγή της θέσης του στοιχείου μενού Λογαριασμός**](#changing-the-position-of-the-account-menu-item)

  * [**Πώς να ελέγξετε αν ο χρήστης βρίσκεται σε ένα συγκεκριμένο πλάνο και/ή έχει ενεργή συνδρομή**](#how-to-check-if-the-user-is-under-a-given-plan-andor-has-an-active-subscription)

  * [**Επίλυση προβλημάτων CORS με Font-Icons σε αντιστοιχισμένα domains**](#fixing-cors-issues-with-font-icons-in-mapped-domains)

## Αλλαγή της θέσης του στοιχείου μενού Λογαριασμός

Για να αλλάξετε τη θέση του στοιχείου μενού Λογαριασμός στο Dashboard του πελάτη σας, απλά προσθέστε το παρακάτω απόσπασμα κώδικα στο functions.php του ενεργού θέματος του κύριου ιστότοπού σας. Μπορείτε επίσης να τοποθετήσετε το απόσπασμα μέσα σε ένα από τα mu-plugins ή τα προσαρμοσμένα plugins σας.

add_filter('wu_my_account_menu_position', function() { return 10; // Προσαρμόστε αυτή την τιμή για να τοποθετήσετε το μενού στην επιθυμητή θέση.

## Πώς να ελέγξετε αν ο χρήστης βρίσκεται σε ένα συγκεκριμένο πλάνο και/ή έχει ενεργή συνδρομή

Ως διαχειριστής δικτύου, μπορεί να χρειαστεί να δημιουργήσετε προσαρμοσμένες συναρτήσεις που θα εκτελούν βασικές ενέργειες ή θα κάνουν μια υπηρεσία/λειτουργία διαθέσιμη σε μια επιλεγμένη ομάδα συνδρομητών ή τελικών χρηστών, με βάση την κατάσταση της συνδρομής τους και το πλάνο στο οποίο είναι εγγεγραμμένοι.

Αυτές οι εγγενείς συναρτήσεις του Ultimate Multisite θα σας βοηθήσουν σε αυτό.

Για να ελέγξετε αν ο χρήστης είναι μέλος ενός συγκεκριμένου πλάνου, μπορείτε να χρησιμοποιήσετε τη συνάρτηση:

wu_has_plan($user_id, $plan_id)

Για να ελέγξετε αν η συνδρομή είναι ενεργή, μπορείτε να χρησιμοποιήσετε τη συνάρτηση:

wu_is_active_subscriber($user_id)

Παρακάτω είναι ένα παράδειγμα αποσπάσματος που ελέγχει αν ο τρέχων χρήστης βρίσκεται σε ένα συγκεκριμένο πλάνο (_Plan ID 50_) και αν η συνδρομή του χρήστη είναι ενεργή.

$user_id = get_current_user_id();$plan_id = 50;if (wu_has_plan($user_id, $plan_id) && wu_is_active_subscriber($user_id)) { // Ο ΧΡΗΣΤΗΣ ΕΙΝΑΙ ΜΕΛΟΣ ΤΟΥ ΠΛΑΝΟΥ ΚΑΙ Η ΣΥΝΔΡΟΜΗ ΤΟΥ ΕΙΝΑΙ ΕΝΕΡΓΗ, ΕΚΤΕΛΕΣΤΕ ΕΝΕΡΓΕΙΕΣ} else { // Ο ΧΡΗΣΤΗΣ ΔΕΝ ΕΙΝΑΙ ΜΕΛΟΣ ΤΟΥ ΠΛΑΝΟΥ -- Ή -- Η ΣΥΝΔΡΟΜΗ ΤΟΥ ΔΕΝ ΕΙΝΑΙ ΕΝΕΡΓΗ, ΕΚΤΕΛΕΣΤΕ ΑΛΛΕΣ ΕΝΕΡΓΕΙΕΣ} // end if;

Σημειώστε ότι η _**wu_has_plan**_ απαιτεί ένα "Plan ID" για να λειτουργήσει.

Για να βρείτε το ID ενός πλάνου, μπορείτε να πάτε στο **Ultimate Multisite > Products**. Το ID κάθε προϊόντος θα εμφανίζεται στα δεξιά του πίνακα.

Σημειώστε ότι οι χρήστες μπορούν να εγγραφούν μόνο σε ένα **Plan**, όχι σε Package ή Service, καθώς αυτά είναι μόνο πρόσθετα για ένα **Plan**.

![Λίστα προϊόντων που δείχνει τα ID των πλάνων](/img/admin/products-list.png)

## Επίλυση προβλημάτων CORS με Font-Icons σε αντιστοιχισμένα domains
## Επίλυση προβλημάτων CORS με Font-Icons σε αντιστοιχισμένα domains

Μετά την αντιστοίχιση ενός domain σε ένα υπο-ιστότοπο, μπορεί να διαπιστώσετε ότι ο ιστότοπος αντιμετωπίζει πρόβλημα με τη φόρτωση προσαρμοσμένων γραμματοσειρών. Αυτό προκαλείται από έναν αποκλεισμό cross-origin στις ρυθμίσεις του διακομιστή σας.

Δεδομένου ότι τα αρχεία γραμματοσειρών φορτώνονται σχεδόν πάντα απευθείας από CSS, το plugin αντιστοίχισης domain δεν μπορεί να ξαναγράψει τα URLs για να χρησιμοποιήσει το αντιστοιχισμένο domain αντί του αρχικού, οπότε για να επιλύσετε το πρόβλημα, θα χρειαστεί να τροποποιήσετε τα αρχεία ρυθμίσεων του διακομιστή σας.

Παρακάτω είναι αποσπάσματα κώδικα για την επίλυση του προβλήματος για Apache και NGINX. Αυτές οι αλλαγές απαιτούν προχωρημένη γνώση των αρχείων ρυθμίσεων διακομιστή (αρχεία .htaccess και αρχεία ρυθμίσεων NGINX). Αν δεν αισθάνεστε άνετα να κάνετε αυτές τις αλλαγές μόνοι σας, στείλτε αυτή τη σελίδα στους υπεύθυνους υποστήριξης του παρόχου φιλοξενίας σας όταν ζητάτε βοήθεια.

### Apache

Στο αρχείο .htaccess σας, προσθέστε:

<FilesMatch ".(ttf|ttc|otf|eot|woff|font.css|css)$"> Header set Access-Control-Allow-Origin "*" 

### NGINX

Στο αρχείο ρυθμίσεων του διακομιστή σας (η τοποθεσία διαφέρει από διακομιστή σε διακομιστή), προσθέστε:

location ~ .(ttf|ttc|otf|eot|woff|font.css|css)$ { add_header Access-Control-Allow-Origin "*";}
