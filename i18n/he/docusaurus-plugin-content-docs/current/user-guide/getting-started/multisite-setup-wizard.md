---
title: אשף הגדרת Multisite
sidebar_position: 3
_i18n_hash: fd09dc94f24b0b37245b847380feea3f
---
# אשף הגדרת Multisite

Ultimate Multisite כולל אשף מובנה שממיר באופן אוטומטי התקנת WordPress רגילה לרשת WordPress Multisite. זה מייתר את הצורך לערוך ידנית את הקובץ `wp-config.php` או להריץ פקודות בבסיס הנתונים.

:::tip
אם התקנת WordPress שלכם כבר פועלת כרשת Multisite, אפשר לדלג על שלב זה לגמרי. האשף מופיע רק כאשר Multisite עדיין לא מופעל.
:::

## מתי האשף מופיע?

כשמפעילים את Ultimate Multisite על התקנת WordPress רגילה (שאינה Multisite), התוסף מזהה ש-Multisite לא מופעל ומפנה אתכם אוטומטית לאשף הגדרת Multisite במקום לאשף ההגדרה הרגיל.

אפשר גם לגשת אליו ישירות דרך **WP Admin > Ultimate Multisite > Multisite Setup**.

## דרישות מקדימות

לפני הרצת האשף, ודאו:

- יש לכם **הרשאות מנהל** להתקנת WordPress שלכם
- קובץ ה-`wp-config.php` בשרת שלכם **ניתן לכתיבה** על ידי שרת האינטרנט
- יש לכם **גיבוי עדכני** של הקבצים ובסיס הנתונים שלכם

:::warning
האשף משנה את קובץ ה-`wp-config.php` שלכם ויוצר טבלאות חדשות בבסיס הנתונים. תמיד צרו גיבוי לפני שממשיכים.
:::

## שלב 1: ברוכים הבאים

המסך הראשון מסביר מהו WordPress Multisite ומה האשף יעשה:

- יפעיל את תכונת Multisite בהגדרות WordPress שלכם
- ייצור את טבלאות בסיס הנתונים הנדרשות לרשת
- יוסיף את קבועי ה-multisite הדרושים ל-`wp-config.php`
- יפעיל את Ultimate Multisite ברמת הרשת על פני כל הרשת

![אשף הגדרת Multisite - שלב ברוכים הבאים](/img/installation/multisite-wizard/wizard-welcome.png)

לחצו **Continue** כדי להמשיך.

## שלב 2: הגדרת רשת

בשלב זה תתבקשו להגדיר את הגדרות הרשת שלכם.

### מבנה האתרים

בחרו כיצד אתרי הרשת שלכם יאורגנו:

- **תת-דומיינים** (מומלץ) — לכל אתר יש תת-דומיין משלו, למשל `site1.yourdomain.com`
- **תת-תיקיות** — האתרים נוצרים כנתיבים, למשל `yourdomain.com/site1`

:::note
אם תבחרו בתת-דומיינים, תצטרכו להגדיר **wildcard DNS** ו**תעודת SSL מסוג wildcard** לדומיין שלכם. רוב שירותי האחסון המנוהלים של WordPress מטפלים בזה אוטומטית. ראו [Ultimate Multisite 101](./ultimate-multisite-101) להשוואה מפורטת.
:::

### שם הרשת

הזינו שם לרשת שלכם. ברירת המחדל היא כותרת האתר הנוכחי עם הוספת "Network". אפשר לשנות זאת מאוחר יותר מהגדרות הרשת.

### אימייל מנהל הרשת

כתובת האימייל שתשמש להתראות ניהול הרשת. ברירת המחדל היא כתובת האימייל של המשתמש הנוכחי.

![אשף הגדרת Multisite - הגדרת רשת](/img/installation/multisite-wizard/wizard-network-configuration.png)

לאחר מילוי השדות, לחצו **Continue** כדי להמשיך.

## שלב 3: התקנה

לחצו על כפתור **Install** כדי להתחיל. האשף מבצע חמישה שלבים אוטומטיים ברצף, כל אחד מציג את ההתקדמות שלו בזמן אמת:

![אשף הגדרת Multisite - התקנה ממתינה](/img/installation/multisite-wizard/wizard-installation-pending.png)

| שלב | תיאור |
|------|-------------|
| **Enable Multisite** | מוסיף את הקבוע `WP_ALLOW_MULTISITE` ל-`wp-config.php` |
| **Create Network** | יוצר את טבלאות בסיס הנתונים של multisite‏ (`wp_site`, `wp_sitemeta`, `wp_blogs` וכו') וממלא אותן בהגדרות הרשת שלכם |
| **Update Configuration** | מוסיף את קבועי ה-multisite הסופיים ל-`wp-config.php`‏ (`MULTISITE`, `SUBDOMAIN_INSTALL`, `DOMAIN_CURRENT_SITE` וכו') |
| **Fix Cookies** | מוודא שכתובת האתר נכונה במטא-דאטה של הרשת כדי למנוע בעיות אימות לאחר ההפעלה |
| **Network Activate Plugin** | מפעיל את Ultimate Multisite ברמת הרשת כך שירוץ על פני כל הרשת |

כל שלב מציג אחד מהסטטוסים הבאים:

- **Pending** — ממתין לעיבוד
- **Installing...** — רץ כעת
- **Success!** — הושלם בהצלחה
- **הודעת שגיאה** — אירעה שגיאה (ההודעה תתאר את הבעיה)

לאחר שכל השלבים הושלמו בהצלחה, תראו סטטוס ירוק "!Success" לכל פריט:

![אשף הגדרת Multisite - התקנה הושלמה](/img/installation/multisite-wizard/wizard-installation-complete.png)

לאחר מכן האשף ימשיך אוטומטית למסך ההשלמה.

## שלב 4: סיום

לאחר השלמת ההתקנה, תראו הודעת הצלחה המאשרת ש-WordPress Multisite הופעל.

![אשף הגדרת Multisite - ההגדרה הושלמה](/img/installation/multisite-wizard/wizard-complete.png)

עכשיו אפשר להמשיך עם אשף ההגדרה של Ultimate Multisite כדי להגדיר את פלטפורמת ה-WaaS שלכם (פרטי חברה, תוכן ברירת מחדל, שערי תשלום וכו').

:::note
לאחר השלמת התקנת ה-multisite, הדפדפן שלכם יבצע הפניה דרך ממשק ניהול הרשת שהופעל לאחרונה. ייתכן שתצטרכו להתחבר מחדש כיוון שעוגיות האימות מתעדכנות לסביבת ה-multisite.
:::

## חלופה להגדרה ידנית

אם האשף לא יכול לכתוב לקובץ ה-`wp-config.php` שלכם (בגלל הרשאות קובץ או הגבלות שרת), הוא יציג את הקוד המדויק שצריך להוסיף ידנית:

1. **קבועי wp-config.php** שצריך להוסיף מעל השורה `/* That's all, stop editing! */`
2. **כללי rewrite של htaccess.** המתאימים למבנה האתר שבחרתם (תת-דומיין או תת-תיקייה)

לאחר ביצוע השינויים הידניים, רעננו את הדף והאשף יזהה ש-multisite כעת פעיל.

## פתרון בעיות

### האשף אומר ש-wp-config.php לא ניתן לכתיבה

תהליך שרת האינטרנט שלכם צריך הרשאת כתיבה לקובץ `wp-config.php`. אפשר:

- לשנות זמנית את הרשאות הקובץ ל-`644` או `666`
- להשתמש בהנחיות החלופה להגדרה ידנית שהאשף מספק
- לבקש עזרה מספק האחסון שלכם

### האתרים לא נגישים לאחר ההגדרה (תת-דומיינים)

אם בחרתם במבנה תת-דומיינים, צריך להגדיר **wildcard DNS** לדומיין שלכם. הוסיפו רשומת DNS:

```
Type: A (or CNAME)
Host: *
Value: [your server IP]
```

בדקו עם ספק האחסון שלכם אם אינכם בטוחים כיצד להגדיר זאת.

### בעיות אימות לאחר ההגדרה

אם התנתקתם או נתקלתם בשגיאות עוגיות לאחר הגדרת ה-multisite:

1. נקו את עוגיות הדפדפן לאתר
2. התחברו מחדש בכתובת `yourdomain.com/wp-login.php`
3. אם הבעיה נמשכת, בדקו שב-`wp-config.php` שלכם אין `COOKIE_DOMAIN` מוגדר ל-`false` — זו בעיה ידועה בהתקנות multisite מסוג תת-דומיין

### שלב נכשל במהלך ההתקנה

אם אחד משלבי ההתקנה מציג שגיאה:

1. שימו לב להודעת השגיאה המוצגת
2. חזרו לשלב ההגדרה ונסו שוב
3. אם השגיאה נמשכת, בדקו את לוג שגיאות PHP של השרת לפרטים נוספים
4. שלבים שכבר הושלמו ידולגו בהרצות הבאות (המתקין הוא idempotent)
