---
title: קטעי קוד
sidebar_position: 1
_i18n_hash: 2284b14474d86f665fa7c84cc305553e
---
# קטעי קוד לגרסה 2

באופן בסיסי, קטעי קוד עבור **WordPress** משמשים לביצוע פעולות מסוימות שאחרת היו דורשות תוסף קטן ייעודי. קטעי קוד כאלה ממוקמים באחד מקבצי הליבה של WordPress או קבצי התבנית (בדרך כלל קובץ functions.php של התבנית שלכם) או שניתן להשתמש בהם כתוסף MU.

במאמר זה נציג שלושה קטעי קוד שניתן להשתמש בהם עם **Ultimate Multisite v2**:

  * [**שינוי מיקום פריט התפריט "חשבון"**](#changing-the-position-of-the-account-menu-item)

  * [**כיצד לבדוק אם המשתמש נמצא תחת תוכנית מסוימת ו/או יש לו מנוי פעיל**](#how-to-check-if-the-user-is-under-a-given-plan-andor-has-an-active-subscription)

  * [**תיקון בעיות CORS עם גופני אייקונים בדומיינים ממופים**](#fixing-cors-issues-with-font-icons-in-mapped-domains)

## שינוי מיקום פריט התפריט "חשבון"

כדי לשנות את מיקום פריט התפריט "חשבון" בלוח הבקרה של הלקוח שלכם, פשוט הוסיפו את קטע הקוד הבא לקובץ functions.php של התבנית הפעילה באתר הראשי שלכם. ניתן גם להכניס את הקוד לאחד מתוספי ה-mu-plugins או התוספים המותאמים אישית שלכם.

add_filter('wu_my_account_menu_position', function() { return 10; // שנו ערך זה כדי למקם את התפריט במיקום הרצוי.

## כיצד לבדוק אם המשתמש נמצא תחת תוכנית מסוימת ו/או יש לו מנוי פעיל

כמנהל רשת, ייתכן שתצטרכו ליצור פונקציות מותאמות אישית שיבצעו פעולות בסיסיות או יהפכו שירות/תכונה לזמינים לקבוצה נבחרת של מנויים או משתמשי קצה, בהתבסס על סטטוס המנוי שלהם והתוכנית שאליה הם רשומים.

הפונקציות המקוריות של Ultimate Multisite הבאות יעזרו לכם בכך.

כדי לבדוק אם המשתמש חבר בתוכנית מסוימת, תוכלו להשתמש בפונקציה:

wu_has_plan($user_id, $plan_id)

כדי לבדוק אם המנוי פעיל, תוכלו להשתמש בפונקציה:

wu_is_active_subscriber($user_id)

להלן דוגמה לקטע קוד שבודק האם המשתמש הנוכחי נמצא תחת תוכנית ספציפית (_מזהה תוכנית 50_) והאם המנוי של המשתמש פעיל.

$user_id = get_current_user_id();$plan_id = 50;if (wu_has_plan($user_id, $plan_id) && wu_is_active_subscriber($user_id)) { // המשתמש חבר בתוכנית והמנוי שלו פעיל, בצע פעולות} else { // המשתמש אינו חבר בתוכנית -- או -- המנוי שלו אינו פעיל, בצע פעולות אחרות} // end if;

שימו לב ש-_**wu_has_plan**_ דורש "מזהה תוכנית" כדי לפעול.

כדי לקבל את המזהה של תוכנית, תוכלו לגשת אל **Ultimate Multisite > Products**. המזהה של כל מוצר יוצג בצד ימין של הטבלה.

שימו לב שמשתמשים יכולים להירשם רק ל**תוכנית**, ולא לחבילה או שירות, מכיוון שאלה הם רק תוספות ל**תוכנית**.

![רשימת מוצרים המציגה מזהי תוכניות](/img/admin/products-list.png)

## תיקון בעיות CORS עם גופני אייקונים בדומיינים ממופים
## תיקון בעיות CORS עם גופני אייקונים בדומיינים ממופים

לאחר מיפוי דומיין לתת-אתר, ייתכן שתגלו שלאתר יש בעיות בטעינת גופנים מותאמים אישית. הסיבה לכך היא חסימת cross-origin בהגדרות השרת שלכם.

מכיוון שקבצי גופנים כמעט תמיד נטענים ישירות מ-CSS, תוסף מיפוי הדומיינים שלנו אינו מסוגל לשכתב את כתובות ה-URL כדי להשתמש בדומיין הממופה במקום המקורי, ולכן כדי לתקן את הבעיה, תצטרכו לתקן את קבצי תצורת השרת שלכם.

להלן קטעי קוד לתיקון הבעיה עבור Apache ו-NGINX. שינויים אלה דורשים ידע מתקדם בקבצי תצורת שרת (קבצי .htaccess וקבצי תצורה של NGINX). אם אינכם מרגישים בנוח לבצע שינויים אלה בעצמכם, שלחו דף זה לנציגי התמיכה של ספק האחסון שלכם כאשר אתם מבקשים סיוע.

### Apache

בקובץ ה-.htaccess שלכם, הוסיפו:

<FilesMatch ".(ttf|ttc|otf|eot|woff|font.css|css)$"> Header set Access-Control-Allow-Origin "*" 

### NGINX

בקובץ תצורת השרת שלכם (המיקום משתנה משרת לשרת), הוסיפו:

location ~ .(ttf|ttc|otf|eot|woff|font.css|css)$ { add_header Access-Control-Allow-Origin "*";}
