---
title: Майстер налаштування мультисайту
sidebar_position: 3
_i18n_hash: fd09dc94f24b0b37245b847380feea3f
---
# Майстер налаштування мережі сайтів

Ultimate Multisite має вбудований майстер, який автоматично перетворює звичайну інсталяцію WordPress на мережу WordPress Multisite. Це позбавляє необхідності вручну редагувати `wp-config.php` або виконувати команди в базі даних.

:::tip
Якщо ваша інсталяція WordPress вже працює як мережа Multisite, ви можете пропустити цей крок. Майстер з'являється лише тоді, коли Multisite ще не увімкнено.
:::

## Коли з'являється майстер?

Коли ви активуєте Ultimate Multisite на звичайній (не Multisite) інсталяції WordPress, плагін виявляє, що Multisite не увімкнено, і автоматично перенаправляє вас до Майстра налаштування мережі замість звичайного майстра налаштування.

Ви також можете відкрити його безпосередньо: **Адмінка WP > Ultimate Multisite > Multisite Setup**.

## Передумови

Перед запуском майстра переконайтеся, що:

- У вас є **права адміністратора** вашої інсталяції WordPress
- Файл `wp-config.php` на вашому сервері **доступний для запису** веб-сервером
- Ви маєте **свіжу резервну копію** файлів і бази даних

:::warning
Майстер змінює файл `wp-config.php` і створює нові таблиці в базі даних. Завжди створюйте резервну копію перед продовженням.
:::

## Крок 1: Привітання

Перший екран пояснює, що таке WordPress Multisite і що зробить майстер:

- Увімкне функцію Multisite у конфігурації WordPress
- Створить необхідні таблиці бази даних для мережі
- Додасть потрібні константи multisite до `wp-config.php`
- Активує Ultimate Multisite на рівні мережі

![Майстер налаштування мережі — Крок привітання](/img/installation/multisite-wizard/wizard-welcome.png)

Натисніть **Continue**, щоб продовжити.

## Крок 2: Конфігурація мережі

На цьому кроці вам потрібно налаштувати параметри мережі.

### Структура сайтів

Виберіть, як будуть організовані сайти вашої мережі:

- **Піддомени** (Рекомендовано) — Кожен сайт отримує власний піддомен, наприклад, `site1.yourdomain.com`
- **Підкаталоги** — Сайти створюються як шляхи, наприклад, `yourdomain.com/site1`

:::note
Якщо ви обираєте піддомени, вам потрібно буде налаштувати **wildcard DNS** і **wildcard SSL-сертифікат** для вашого домену. Більшість керованих WordPress-хостингів роблять це автоматично. Детальне порівняння дивіться в [Ultimate Multisite 101](./ultimate-multisite-101).
:::

### Назва мережі

Введіть назву для вашої мережі. За замовчуванням використовується поточна назва сайту з додаванням слова "Network". Ви можете змінити це пізніше в налаштуваннях мережі.

### Email адміністратора мережі

Адреса електронної пошти для сповіщень адміністрування мережі. За замовчуванням використовується email поточного користувача.

![Майстер налаштування мережі — Конфігурація мережі](/img/installation/multisite-wizard/wizard-network-configuration.png)

Після заповнення полів натисніть **Continue**, щоб продовжити.

## Крок 3: Встановлення

Натисніть кнопку **Install**, щоб почати. Майстер виконує п'ять автоматизованих кроків послідовно, показуючи прогрес кожного в реальному часі:

![Майстер налаштування мережі — Очікування встановлення](/img/installation/multisite-wizard/wizard-installation-pending.png)

| Крок | Опис |
|------|-------------|
| **Enable Multisite** | Додає константу `WP_ALLOW_MULTISITE` до `wp-config.php` |
| **Create Network** | Створює таблиці бази даних multisite (`wp_site`, `wp_sitemeta`, `wp_blogs` тощо) і заповнює їх конфігурацією вашої мережі |
| **Update Configuration** | Додає фінальні константи multisite до `wp-config.php` (`MULTISITE`, `SUBDOMAIN_INSTALL`, `DOMAIN_CURRENT_SITE` тощо) |
| **Fix Cookies** | Перевіряє правильність URL сайту в метаданих мережі, щоб запобігти проблемам з автентифікацією після активації |
| **Network Activate Plugin** | Активує Ultimate Multisite на рівні мережі, щоб він працював на всіх сайтах |

Кожен крок показує один із цих статусів:

- **Pending** — Очікує обробки
- **Installing...** — Виконується
- **Success!** — Успішно завершено
- **Повідомлення про помилку** — Сталася помилка (повідомлення опише проблему)

Після успішного завершення всіх кроків ви побачите зелений статус "Success!" для кожного пункту:

![Майстер налаштування мережі — Встановлення завершено](/img/installation/multisite-wizard/wizard-installation-complete.png)

Після цього майстер автоматично перейде до екрану завершення.

## Крок 4: Завершення

Після завершення встановлення ви побачите повідомлення про успіх, що підтверджує увімкнення WordPress Multisite.

![Майстер налаштування мережі — Налаштування завершено](/img/installation/multisite-wizard/wizard-complete.png)

Тепер ви можете продовжити роботу з майстром налаштування Ultimate Multisite для конфігурації вашої WaaS-платформи (дані компанії, контент за замовчуванням, платіжні шлюзи тощо).

:::note
Після завершення встановлення multisite ваш браузер буде перенаправлено через щойно увімкнену адмінку мережі. Можливо, вам доведеться увійти знову, оскільки cookies автентифікації оновлюються для середовища multisite.
:::

## Резервний варіант ручного налаштування

Якщо майстер не може записати у файл `wp-config.php` (через права доступу до файлу або обмеження сервера), він покаже точний код, який потрібно додати вручну:

1. **Константи wp-config.php**, які потрібно додати над рядком `/* That's all, stop editing! */`
2. **Правила перезапису .htaccess**, відповідні для обраної вами структури сайтів (піддомени або підкаталоги)

Після внесення ручних змін оновіть сторінку, і майстер виявить, що multisite тепер активний.

## Усунення неполадок

### Майстер повідомляє, що wp-config.php недоступний для запису

Процес вашого веб-сервера потребує дозволу на запис у файл `wp-config.php`. Ви можете:

- Тимчасово змінити права доступу до файлу на `644` або `666`
- Скористатися інструкціями резервного ручного налаштування, наданими майстром
- Звернутися по допомогу до вашого хостинг-провайдера

### Сайти недоступні після налаштування (піддомени)

Якщо ви обрали структуру піддоменів, вам потрібно налаштувати **wildcard DNS** для вашого домену. Додайте DNS-запис:

```
Type: A (or CNAME)
Host: *
Value: [IP-адреса вашого сервера]
```

Зверніться до вашого хостинг-провайдера, якщо не впевнені, як це налаштувати.

### Проблеми з автентифікацією після налаштування

Якщо вас розлогінило або виникають помилки cookies після налаштування multisite:

1. Очистіть cookies браузера для цього сайту
2. Увійдіть знову за адресою `yourdomain.com/wp-login.php`
3. Якщо проблема не зникає, перевірте, чи не встановлено у вашому `wp-config.php` значення `COOKIE_DOMAIN` як `false` — це відома проблема на інсталяціях multisite з піддоменами

### Крок не вдався під час встановлення

Якщо один із кроків встановлення показує помилку:

1. Зверніть увагу на повідомлення про помилку
2. Поверніться до кроку конфігурації та спробуйте ще раз
3. Якщо помилка повторюється, перевірте журнал помилок PHP на вашому сервері для отримання додаткової інформації
4. Кроки, які вже завершено, будуть пропущені при наступних запусках (інсталятор є ідемпотентним)
