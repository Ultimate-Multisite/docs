---
title: Як налаштувати зіставлення доменів
sidebar_position: 6
_i18n_hash: 1bb022a0d812fd87791d9ea476f7be84
---
# Як налаштувати прив'язку доменів (v2)

_**ВАЖЛИВО: Ця стаття стосується Ultimate Multisite версії 2.x.**_

Одна з найпотужніших можливостей преміальної мережі — це надання клієнтам змоги прив'язати власний домен верхнього рівня до їхніх сайтів. Адже погодьтеся, що виглядає професійніше: [_**joesbikeshop.yournetwork.com**_](http://joesbikeshop.yournetwork.com) чи [_**joesbikeshop.com**_](http://joesbikeshop.com)? Саме тому Ultimate Multisite має цю функцію вбудованою — без потреби використовувати сторонні плагіни.

## Що таке прив'язка доменів?

Як випливає з назви, прив'язка доменів — це можливість Ultimate Multisite приймати запити до власного домену та спрямовувати їх до відповідного сайту в мережі, до якого цей домен прив'язаний.

### Як налаштувати прив'язку доменів у вашій мережі Ultimate Multisite

Щоб прив'язка доменів працювала, потрібно виконати кілька налаштувань. На щастя, Ultimate Multisite автоматизує більшу частину роботи, тож ви легко впораєтеся з цим завданням.

Під час встановлення Ultimate Multisite майстер автоматично скопіює та встановить файл **sunrise.php** у потрібну папку. **Майстер не дозволить продовжити, поки цей крок не буде завершено**.

![Майстер встановлення Ultimate Multisite з кроком sunrise.php](/img/config/settings-domain-mapping.png)

Це означає, що одразу після завершення роботи майстра встановлення Ultimate Multisite ви можете починати прив'язувати власні домени.

Зверніть увагу, що прив'язка доменів у Ultimate Multisite не є обов'язковою. Ви можете використовувати вбудовану функцію прив'язки доменів WordPress Multisite або будь-яке інше рішення.

Якщо вам потрібно вимкнути прив'язку доменів Ultimate Multisite, щоб використовувати інше рішення, ви можете зробити це в розділі **Ultimate Multisite > Settings > Domain Mapping**.

![Налаштування прив'язки доменів з перемикачем увімкнення](/img/config/settings-domain-mapping.png)

Трохи нижче ви побачите опцію **Force Admin Redirect**. Вона дозволяє контролювати, чи зможуть ваші клієнти отримувати доступ до адмін-панелі як через власний домен, так і через субдомен, чи лише через один із них.

Якщо вибрати **Force redirect to mapped domain**, ваші клієнти зможуть отримувати доступ до адмін-панелі лише через свої власні домени.

Опція **Force redirect to network domain** робить протилежне — ваші клієнти зможуть отримувати доступ до адмін-панелі лише через субдомен, навіть якщо спробують увійти через власний домен.

А опція **Allow access to the admin by both mapped domain domain and network domain** дозволяє їм отримувати доступ до адмін-панелі як через субдомен, так і через власний домен.

![Опції Force Admin Redirect для прив'язки доменів](/img/config/settings-domain-mapping.png)

Є два способи прив'язати власний домен. Перший — через панель адміністратора мережі як супер-адміністратор, а другий — через адмін-панель підсайту на сторінці облікового запису.

Але перш ніж прив'язувати власний домен до одного з підсайтів у вашій мережі, переконайтеся, що **DNS-налаштування** доменного імені правильно сконфігуровані.

### 

### Перевірка правильності DNS-налаштувань домену

Щоб прив'язка працювала, домен, який ви плануєте прив'язати, має вказувати на IP-адресу вашої мережі. Зверніть увагу, що вам потрібна саме IP-адреса мережі — тобто IP-адреса домену, на якому встановлено Ultimate Multisite, а не IP-адреса власного домену, який ви хочете прив'язати. Щоб дізнатися IP-адресу конкретного домену, рекомендуємо скористатися, наприклад, [Site24x7](https://www.site24x7.com/find-ip-address-of-web-site.html).

Для правильної прив'язки домену потрібно додати **A-запис** у вашій конфігурації **DNS**, що вказує на цю **IP-адресу**. Керування DNS суттєво відрізняється у різних реєстраторів доменів, але в інтернеті є багато посібників на цю тему — просто пошукайте «_Створення A-запису в XXXX_», де XXXX — ваш реєстратор доменів (наприклад, «_Створення A-запису в GoDaddy_»).

Якщо у вас виникли труднощі з налаштуванням, **зверніться до служби підтримки вашого реєстратора доменів** — там вам допоможуть із цим.

Якщо ви плануєте дозволити клієнтам самостійно прив'язувати свої домени, їм доведеться виконати цю частину роботи самим. Якщо вони не можуть створити A-запис, порадьте їм звернутися до служби підтримки свого реєстратора.

### Прив'язка власного домену як супер-адміністратор

Коли ви увійшли як супер-адміністратор у вашій мережі, ви можете легко додавати та керувати власними доменами, перейшовши до **Ultimate Multisite > Domains**.

![Сторінка списку доменів у Ultimate Multisite](/img/admin/domains-list.png)

На цій сторінці натисніть кнопку **Add Domain** вгорі — з'явиться модальне вікно, де ви можете вказати **власне доменне ім'я**, **підсайт**, до якого хочете прив'язати домен, та вирішити, чи зробити його **основним доменом** (зверніть увагу, що до одного підсайту можна прив'язати **кілька доменних імен**).

![Модальне вікно додавання домену з полями для імені домену та сайту](/img/admin/domains-list.png)

Після заповнення всієї інформації натисніть кнопку **Add Existing Domain** внизу.

Це запустить процес перевірки та отримання DNS-інформації про власний домен. Внизу сторінки ви також побачите журнал, щоб стежити за процесом. Це може зайняти кілька хвилин.

**Етап** або статус повинен змінитися з **Checking DNS** на **Ready**, якщо все налаштовано правильно.

![Зміна етапу домену з Checking DNS на Ready](/img/admin/domains-list.png)

![Домен зі статусом Ready у списку доменів](/img/admin/domains-list.png)

Якщо натиснути на доменне ім'я, ви побачите деякі опції. Розглянемо їх коротко:

![Сторінка деталей домену з опціями етапу, сайту, активності та SSL](/img/admin/domains-list.png)

**Stage:** Поточний етап домену. Коли ви щойно додали домен, він, ймовірно, буде на етапі **Checking DNS**. Процес перевірить DNS-записи та підтвердить їхню правильність. Потім домен перейде на етап **Checking SSL**. Ultimate Multisite перевірить, чи є в домену SSL-сертифікат, і позначить ваш домен як **Ready** або **Ready (without SSL)**.

**Site:** Субдомен, пов'язаний із цим доменом. Прив'язаний домен відображатиме вміст саме цього сайту.

**Active:** Цю опцію можна вмикати та вимикати для активації або деактивації домену.

**Is Primary Domain?:** Ваші клієнти можуть мати кілька прив'язаних доменів для кожного сайту. Використовуйте цю опцію, щоб вказати, чи є цей домен основним для конкретного сайту.

**Is Secure?:** Хоча Ultimate Multisite перевіряє наявність SSL-сертифіката перед увімкненням домену, ви можете вручну вибрати, чи завантажувати домен із SSL-сертифікатом чи без нього. Зверніть увагу: якщо сайт не має SSL-сертифіката, а ви спробуєте примусово завантажити його з SSL, можуть виникнути помилки.

### Прив'язка власного домену як користувач підсайту

Адміністратори підсайтів також можуть прив'язувати власні домени через адмін-панель свого підсайту.

Спочатку переконайтеся, що ви увімкнули цю опцію в налаштуваннях **Domain mapping**. Дивіться скріншот нижче.

![Налаштування прив'язки доменів, що дозволяють користувачам підсайтів прив'язувати домени](/img/config/settings-domain-mapping.png)

Ви також можете налаштувати цю опцію на рівні **тарифного плану** або в опціях продукту в розділі **Ultimate Multisite > Products**.

![Опція власних доменів у налаштуваннях продукту](/img/config/settings-domain-mapping.png)

Коли будь-яка з цих опцій увімкнена і користувачу підсайту дозволено прив'язувати власні домени, він побачить блок **Domains** на сторінці **Account**.

![Блок Domains на сторінці облікового запису підсайту](/img/admin/domains-list.png)

Користувач може натиснути кнопку **Add Domain**, і з'явиться модальне вікно з інструкціями.

![Модальне вікно додавання домену з DNS-інструкціями для користувачів підсайтів](/img/admin/domains-list.png)

Потім користувач може натиснути **Next Step** і перейти до додавання власного доменного імені. Він також може вибрати, чи буде це основний домен.

![Поле для введення власного доменного імені з опцією основного домену](/img/admin/domains-list.png)

![Натисніть Add Domain, щоб почати перевірку DNS](/img/admin/domains-list.png)Натискання **Add Domain** запустить процес перевірки та отримання DNS-інформації про власний домен.

### Про синхронізацію доменів

Синхронізація доменів — це процес, під час якого Ultimate Multisite додає власне доменне ім'я до вашого хостинг-акаунту як додатковий домен, **щоб прив'язка домену працювала**.

Синхронізація доменів відбувається автоматично, якщо ваш хостинг-провайдер має інтеграцію з функцією прив'язки доменів Ultimate Multisite. Наразі підтримуються такі хостинг-провайдери: _Runcloud, Closte, WP Engine, Gridpane, WPMU Dev, Cloudways_ та _Cpanel._

Вам потрібно активувати цю інтеграцію в налаштуваннях Ultimate Multisite на вкладці **Integration**.

![Вкладка Integration у налаштуваннях Ultimate Multisite](/img/config/settings-domain-mapping.png)

![Налаштування інтеграції з хостинг-провайдером для синхронізації доменів](/img/config/settings-domain-mapping.png)

_Зверніть увагу: якщо ваш хостинг-провайдер не входить до списку вище, **вам потрібно буде вручну синхронізувати або додати доменне ім'я** до вашого хостинг-акаунту._
