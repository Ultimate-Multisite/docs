---
title: Compatibilité Tutor Multisite
sidebar_position: 1
_i18n_hash: eb70406013fbbbd32019b48d0d6558f3
---
import AddonBanner from '@site/src/components/AddonBanner';

<AddonBanner slug="tutor-multisite-compatibility" name="Tutor Multisite Compatibility" />

# Compatibilité Tutor Multisite

Un plugin WordPress qui ajoute des correctifs de compatibilité pour Tutor LMS dans les environnements multisite.

## Description

Ce plugin fournit des correctifs de compatibilité essentiels pour exécuter Tutor LMS sur des réseaux multisite WordPress. Il gère l'inscription des utilisateurs, la gestion des instructeurs, les limitations de cours et d'autres fonctionnalités spécifiques aux multisites.

## Fonctionnalités

- **Gestion des tables de base de données**: détecte automatiquement et crée les tables Tutor LMS manquantes qui échouent en raison des contraintes de clé étrangère multisite
- **Inscription des utilisateurs multisite**: gestionnaires AJAX personnalisés pour gérer l'inscription des utilisateurs à travers les sites du réseau
- **Gestion du rôle d'instructeur**: attribution et gestion automatiques du rôle d'instructeur dans les environnements multisite
- **Limitations de cours**: intégration avec Ultimate Multisite pour gérer les limites de création de cours et de tunnels en fonction des plans de site
- **Vues d'administration personnalisées**: liste d'instructeurs et interface de gestion conscientes du multisite
- **Outils d'administration**: interface de gestion de base de données pour les administrateurs réseau et de site

## Exigences

- WordPress 5.0+
- PHP 7.4+
- Plugin Tutor LMS (appliqué automatiquement via l'en-tête `Requires Plugins`)
- Installation WordPress Multisite
- Plugin Ultimate Multisite (pour la fonctionnalité de limitations de cours)

## Installation

1. Téléchargez les fichiers du plugin dans `/wp-content/plugins/tutor-multisite-compatibility/`
2. Assurez-vous que Tutor LMS est installé et activé
3. Activez le plugin via le menu 'Extensions' dans WordPress
4. Le plugin s'intégrera automatiquement à Tutor LMS

## Structure des fichiers

```
tutor-multisite-compatibility/
├── tutor-multisite-compatibility.php (Main plugin file)
├── includes/
│   ├── class-database-manager.php (Database table creation and management)
│   ├── class-admin-interface.php (Admin interface for database management)
│   ├── class-course-limits.php (Course and funnel limitation handlers)
│   ├── class-instructor-manager.php (Instructor role management)
│   ├── class-ajax-handlers.php (Custom AJAX handlers)
│   ├── class-query-helper.php (Database query utilities)
│   ├── models/
│   │   └── class-multisite-user-model.php (Multisite user model)
│   └── admin/
│       ├── class-instructors-list.php (Custom instructor list)
│       └── views/
│           └── instructors.php (Instructor admin view)
└── README.md
```

## Fonctionnalité déplacée depuis le plugin MU

Ce plugin contient des fonctionnalités qui étaient auparavant dans `wp-content/mu-plugins/daves.php` :

- Limitations de changement d'état du cours
- Limitations de création de cours
- Intégration CartFlows et limites
- Gestion du rôle d'instructeur Tutor
- Gestion de l'inscription des utilisateurs multisite
- Affichage de l'ID produit de cours

## Gestion de la base de données

### Le problème

Dans les environnements multisite WordPress, la création des tables Tutor LMS échoue pour les tables ayant des contraintes de clé étrangère vers la table des utilisateurs. Cela se produit parce que :

- Les tables spécifiques au site utilisent des préfixes comme `wp_2_tutor_carts`
- Les clés étrangères font référence à `wp_2_users` (qui n'existe pas)
- La table réelle des utilisateurs est `wp_users` (partagée sur le réseau)

### La solution

Ce plugin fait automatiquement :

1. **Détecte les tables manquantes** : vérifie les tables qui ont échoué à être créées en raison de contraintes de clé étrangère
2. **Crée des tables avec les références correctes** : utilise le nom de table d'utilisateurs approprié (`wp_users` dans le multisite)
3. **Gère plusieurs scénarios** :

- Activation/reaactivation du plugin
- Création d'un nouveau site dans le réseau
- Vérification manuelle des tables via l'interface d'administration

### Tables affectées

- `tutor_coupon_usages` - Contient une clé étrangère vers la table des utilisateurs
- `tutor_carts` - Contient une clé étrangère vers la table des utilisateurs
- `tutor_notification_preferences` - Table TutorPro avec une clé étrangère vers la table des utilisateurs

### Interface d'administration

Accédez aux outils de gestion de base de données à :

- **Admin réseau** : Réglages → Tutor Multisite DB
- **Admin site** : Outils → Tutor Multisite DB

L'interface vous permet de :

- Voir les tables manquantes sur tous les sites
- Déclencher manuellement la création de tables
- Vérifier la configuration de la base de données
- Voir les informations de statut détaillées

## Support

Ce plugin est spécifiquement conçu pour la plateforme KursoPro. Pour un support technique, contactez l'équipe de développement.
