---
title: نحوه پیکربندی نگاشت دامنه
sidebar_position: 6
_i18n_hash: 1bb022a0d812fd87791d9ea476f7be84
---
# نحوه پیکربندی نگاشت دامنه (نسخه ۲)

_**نکته مهم: این مقاله مربوط به Ultimate Multisite نسخه 2.x است.**_

یکی از قدرتمندترین امکانات یک شبکه حرفه‌ای، قابلیت ارائه این فرصت به مشتریان است که بتوانند یک دامنه سطح بالا را به سایت خود متصل کنند. به هر حال، کدام حرفه‌ای‌تر به نظر می‌رسد: [_**joesbikeshop.yournetwork.com**_](http://joesbikeshop.yournetwork.com) یا [_**joesbikeshop.com**_](http://joesbikeshop.com)؟ به همین دلیل Ultimate Multisite این قابلیت را به صورت داخلی ارائه می‌دهد، بدون نیاز به استفاده از افزونه‌های جانبی.

## نگاشت دامنه چیست؟

همان‌طور که از نامش پیداست، نگاشت دامنه قابلیتی است که Ultimate Multisite ارائه می‌دهد تا درخواست یک دامنه سفارشی را دریافت کرده و آن را به سایت متناظر در شبکه که آن دامنه خاص به آن متصل شده، هدایت کند.

### نحوه راه‌اندازی نگاشت دامنه در شبکه Ultimate Multisite شما

نگاشت دامنه نیاز به تنظیماتی از طرف شما دارد تا کار کند. خوشبختانه، Ultimate Multisite کارهای سخت را برای شما خودکار می‌کند تا به راحتی بتوانید نیازمندی‌ها را برآورده کنید.

در طول نصب Ultimate Multisite، ویزارد به صورت خودکار فایل **sunrise.php** را کپی کرده و در پوشه مشخص‌شده نصب می‌کند. **ویزارد اجازه نمی‌دهد تا زمانی که این مرحله کامل نشده، به مرحله بعد بروید**.

![ویزارد نصب Ultimate Multisite با مرحله sunrise.php](/img/config/settings-domain-mapping.png)

این به این معناست که پس از اتمام تنظیمات شبکه توسط ویزارد نصب Ultimate Multisite، می‌توانید بلافاصله شروع به نگاشت دامنه سفارشی کنید.

توجه داشته باشید که نگاشت دامنه در Ultimate Multisite اجباری نیست. شما می‌توانید از قابلیت نگاشت دامنه بومی WordPress Multisite یا هر راه‌حل نگاشت دامنه دیگری استفاده کنید.

اگر نیاز دارید نگاشت دامنه Ultimate Multisite را غیرفعال کنید تا از راه‌حل‌های نگاشت دامنه دیگر استفاده کنید، می‌توانید این قابلیت را در **Ultimate Multisite > Settings > Domain Mapping** غیرفعال کنید.

![تنظیمات نگاشت دامنه با دکمه فعال‌سازی](/img/config/settings-domain-mapping.png)

درست زیر این گزینه، گزینه **Force Admin Redirect** را نیز می‌بینید. این گزینه به شما امکان می‌دهد کنترل کنید که آیا مشتریان شما می‌توانند به پیشخوان مدیریت خود هم از طریق دامنه سفارشی و هم ساب‌دامنه دسترسی داشته باشند یا فقط از یکی از آن‌ها.

اگر **Force redirect to mapped domain** را انتخاب کنید، مشتریان شما فقط می‌توانند از طریق دامنه‌های سفارشی خود به پیشخوان مدیریت دسترسی داشته باشند.

گزینه **Force redirect to network domain** دقیقاً برعکس عمل می‌کند - مشتریان شما فقط اجازه دسترسی به پیشخوان خود از طریق ساب‌دامنه را خواهند داشت، حتی اگر از طریق دامنه‌های سفارشی خود وارد شوند.

و گزینه **Allow access to the admin by both mapped domain domain and network domain** به آن‌ها اجازه می‌دهد هم از طریق ساب‌دامنه و هم دامنه سفارشی به پیشخوان مدیریت دسترسی داشته باشند.

![گزینه‌های Force Admin Redirect برای نگاشت دامنه](/img/config/settings-domain-mapping.png)

دو راه برای نگاشت دامنه سفارشی وجود دارد. اول از طریق پیشخوان مدیریت شبکه به عنوان super admin و دوم از طریق پیشخوان مدیریت ساب‌سایت در صفحه حساب کاربری.

اما قبل از شروع نگاشت دامنه سفارشی به یکی از ساب‌سایت‌های شبکه، باید مطمئن شوید که **تنظیمات DNS** دامنه به درستی پیکربندی شده است.

### 

### اطمینان از پیکربندی صحیح تنظیمات DNS دامنه

برای اینکه نگاشت کار کند، باید مطمئن شوید که دامنه‌ای که قصد نگاشت آن را دارید به آدرس IP شبکه شما اشاره می‌کند. توجه کنید که به آدرس IP شبکه نیاز دارید - آدرس IP دامنه‌ای که Ultimate Multisite روی آن نصب شده - نه آدرس IP دامنه سفارشی که می‌خواهید نگاشت کنید. برای جستجوی آدرس IP یک دامنه خاص، پیشنهاد می‌کنیم به [Site24x7](https://www.site24x7.com/find-ip-address-of-web-site.html) مراجعه کنید.

برای نگاشت صحیح دامنه، باید یک **A RECORD** در پیکربندی **DNS** خود اضافه کنید که به آن **آدرس IP** اشاره کند. مدیریت DNS بین ثبت‌کنندگان مختلف دامنه متفاوت است، اما آموزش‌های زیادی آنلاین وجود دارد که اگر "_Creating A Record on XXXX_" را جستجو کنید پیدا می‌کنید، که XXXX ثبت‌کننده دامنه شماست (مثلاً: "_Creating A Record on GoDaddy_").

اگر در انجام این کار مشکل دارید، **با پشتیبانی ثبت‌کننده دامنه خود تماس بگیرید** و آن‌ها می‌توانند در این بخش به شما کمک کنند.

اگر قصد دارید به مشتریان خود اجازه دهید دامنه‌های خود را نگاشت کنند، آن‌ها باید این بخش را خودشان انجام دهند. اگر نتوانستند A Record را ایجاد کنند، آن‌ها را به سیستم پشتیبانی ثبت‌کننده‌شان راهنمایی کنید.

### نگاشت دامنه سفارشی به عنوان Super Admin

وقتی به عنوان super admin در شبکه خود وارد شده‌اید، می‌توانید به راحتی دامنه‌های سفارشی را با رفتن به **Ultimate Multisite > Domains** اضافه و مدیریت کنید.

![صفحه لیست دامنه‌ها در Ultimate Multisite](/img/admin/domains-list.png)

در این صفحه، می‌توانید روی دکمه **Add Domain** در بالا کلیک کنید و یک پنجره مودال ظاهر می‌شود که در آن می‌توانید **نام دامنه سفارشی**، **ساب‌سایت** مورد نظر برای اعمال دامنه سفارشی و اینکه آیا می‌خواهید آن را به عنوان **دامنه اصلی** تنظیم کنید یا نه را مشخص کنید (توجه کنید که می‌توانید **چندین دامنه را به یک ساب‌سایت نگاشت کنید**).

![مودال افزودن دامنه با فیلدهای نام دامنه و سایت](/img/admin/domains-list.png)

پس از وارد کردن تمام اطلاعات، می‌توانید روی دکمه **Add Existing Domain** در پایین کلیک کنید.

این کار فرآیند تأیید و دریافت اطلاعات DNS دامنه سفارشی را آغاز می‌کند. همچنین یک گزارش در پایین صفحه می‌بینید که می‌توانید مراحل را دنبال کنید. این فرآیند ممکن است چند دقیقه طول بکشد.

**Stage** یا وضعیت باید از **Checking DNS** به **Ready** تغییر کند اگر همه چیز به درستی تنظیم شده باشد.

![تغییر Stage دامنه از Checking DNS به Ready](/img/admin/domains-list.png)

![دامنه با وضعیت Ready در لیست دامنه‌ها](/img/admin/domains-list.png)

اگر روی نام دامنه کلیک کنید، چند گزینه در داخل آن می‌بینید. بیایید نگاهی سریع به آن‌ها بیندازیم:

![صفحه جزئیات دامنه با گزینه‌های stage، site، active و SSL](/img/admin/domains-list.png)

**Stage:** این مرحله‌ای است که دامنه در آن قرار دارد. وقتی برای اولین بار دامنه را اضافه می‌کنید، احتمالاً در مرحله **Checking DNS** خواهد بود. فرآیند، ورودی‌های DNS را بررسی کرده و صحت آن‌ها را تأیید می‌کند. سپس، دامنه در مرحله **Checking SSL** قرار می‌گیرد. Ultimate Multisite بررسی می‌کند که آیا دامنه SSL دارد یا نه و دامنه شما را به عنوان **Ready** یا **Ready (without SSL)** دسته‌بندی می‌کند.

**Site:** ساب‌دامنه‌ای که با این دامنه مرتبط است. دامنه نگاشت‌شده محتوای این سایت خاص را نمایش می‌دهد.

**Active:** می‌توانید این گزینه را روشن یا خاموش کنید تا دامنه را فعال یا غیرفعال کنید.

**Is Primary Domain?:** مشتریان شما می‌توانند بیش از یک دامنه نگاشت‌شده برای هر سایت داشته باشند. از این گزینه استفاده کنید تا مشخص کنید آیا این دامنه اصلی برای سایت خاص است یا نه.

**Is Secure?:** اگرچه Ultimate Multisite قبل از فعال‌سازی بررسی می‌کند که آیا دامنه گواهی SSL دارد یا نه، می‌توانید به صورت دستی انتخاب کنید که دامنه با یا بدون گواهی SSL بارگذاری شود. توجه کنید که اگر وب‌سایت گواهی SSL نداشته باشد و سعی کنید آن را با SSL بارگذاری کنید، ممکن است خطا دریافت کنید.

### نگاشت دامنه سفارشی به عنوان کاربر ساب‌سایت

مدیران ساب‌سایت نیز می‌توانند دامنه‌های سفارشی را از پیشخوان مدیریت ساب‌سایت خود نگاشت کنند.

ابتدا، باید مطمئن شوید که این گزینه را در تنظیمات **Domain mapping** فعال کرده‌اید. تصویر زیر را ببینید.

![تنظیمات نگاشت دامنه که به کاربران ساب‌سایت اجازه نگاشت دامنه می‌دهد](/img/config/settings-domain-mapping.png)

همچنین می‌توانید این گزینه را در سطح **Plan** یا گزینه‌های محصول در **Ultimate Multisite > Products** تنظیم یا پیکربندی کنید.

![گزینه دامنه‌های سفارشی محصول در تنظیمات محصول](/img/config/settings-domain-mapping.png)

وقتی هر یک از این گزینه‌ها فعال باشد و به کاربر ساب‌سایت اجازه نگاشت دامنه‌های سفارشی داده شود، کاربر ساب‌سایت باید یک متاباکس به نام **Domains** در صفحه **Account** ببیند.

![متاباکس دامنه‌ها در صفحه حساب ساب‌سایت](/img/admin/domains-list.png)

کاربر می‌تواند روی دکمه **Add Domain** کلیک کند و یک پنجره مودال با برخی راهنماها ظاهر می‌شود.

![مودال افزودن دامنه با راهنمای DNS برای کاربران ساب‌سایت](/img/admin/domains-list.png)

سپس کاربر می‌تواند روی **Next Step** کلیک کرده و به افزودن نام دامنه سفارشی ادامه دهد. همچنین می‌تواند انتخاب کند که آیا این دامنه اصلی باشد یا نه.

![فیلد افزودن نام دامنه سفارشی با گزینه دامنه اصلی](/img/admin/domains-list.png)

![کلیک روی Add Domain برای شروع تأیید DNS](/img/admin/domains-list.png)کلیک روی **Add Domain** فرآیند تأیید و دریافت اطلاعات DNS دامنه سفارشی را آغاز می‌کند.

### درباره همگام‌سازی دامنه

همگام‌سازی دامنه فرآیندی است که در آن Ultimate Multisite نام دامنه سفارشی را به عنوان یک دامنه افزودنی به حساب هاستینگ شما اضافه می‌کند **تا نگاشت دامنه کار کند**.

همگام‌سازی دامنه به صورت خودکار انجام می‌شود اگر ارائه‌دهنده هاستینگ شما یکپارچگی با قابلیت نگاشت دامنه Ultimate Multisite داشته باشد. در حال حاضر، این ارائه‌دهندگان هاستینگ عبارتند از _Runcloud، Closte، WP Engine، Gridpane، WPMU Dev، Cloudways_ و _Cpanel_.

شما باید این یکپارچگی را در تنظیمات Ultimate Multisite در تب **Integration** فعال کنید.

![تب Integration در تنظیمات Ultimate Multisite](/img/config/settings-domain-mapping.png)

![تنظیمات یکپارچگی ارائه‌دهنده هاستینگ برای همگام‌سازی دامنه](/img/config/settings-domain-mapping.png)

_توجه کنید که اگر ارائه‌دهنده هاستینگ شما یکی از ارائه‌دهندگان ذکرشده در بالا نیست، **باید به صورت دستی دامنه را همگام‌سازی یا اضافه کنید** به حساب هاستینگ خود._
