---
title: ویزارد راه‌اندازی چندسایته
sidebar_position: 3
_i18n_hash: fd09dc94f24b0b37245b847380feea3f
---
# راهنمای راه‌اندازی چندسایتی

Ultimate Multisite یک راهنمای داخلی دارد که به صورت خودکار یک نصب استاندارد WordPress را به یک شبکه چندسایتی (WordPress Multisite) تبدیل می‌کند. این کار نیاز به ویرایش دستی فایل `wp-config.php` یا اجرای دستورات پایگاه داده را از بین می‌برد.

:::tip
اگر نصب WordPress شما از قبل به صورت شبکه چندسایتی اجرا می‌شود، می‌توانید این مرحله را کاملاً رد کنید. راهنما فقط زمانی نمایش داده می‌شود که چندسایتی هنوز فعال نشده باشد.
:::

## راهنما چه زمانی نمایش داده می‌شود؟

وقتی Ultimate Multisite را روی یک نصب استاندارد (غیر چندسایتی) WordPress فعال می‌کنید، افزونه تشخیص می‌دهد که چندسایتی فعال نیست و به جای راهنمای معمولی راه‌اندازی، شما را به صورت خودکار به راهنمای راه‌اندازی چندسایتی هدایت می‌کند.

همچنین می‌توانید مستقیماً از مسیر **WP Admin > Ultimate Multisite > Multisite Setup** به آن دسترسی داشته باشید.

## پیش‌نیازها

قبل از اجرای راهنما، مطمئن شوید که:

- **دسترسی مدیر** به نصب WordPress خود دارید
- فایل `wp-config.php` سرور شما توسط وب سرور **قابل نوشتن** است
- یک **پشتیبان جدید** از فایل‌ها و پایگاه داده خود دارید

:::warning
راهنما فایل `wp-config.php` شما را تغییر می‌دهد و جداول جدیدی در پایگاه داده ایجاد می‌کند. همیشه قبل از ادامه یک پشتیبان بگیرید.
:::

## مرحله ۱: خوش‌آمدگویی

صفحه اول توضیح می‌دهد که WordPress Multisite چیست و راهنما چه کارهایی انجام خواهد داد:

- فعال‌سازی قابلیت چندسایتی در تنظیمات WordPress شما
- ایجاد جداول پایگاه داده لازم برای شبکه
- افزودن ثابت‌های چندسایتی مورد نیاز به `wp-config.php`
- فعال‌سازی شبکه‌ای Ultimate Multisite در سراسر شبکه

![راهنمای راه‌اندازی چندسایتی - مرحله خوش‌آمدگویی](/img/installation/multisite-wizard/wizard-welcome.png)

برای ادامه روی **Continue** کلیک کنید.

## مرحله ۲: پیکربندی شبکه

در این مرحله از شما خواسته می‌شود تنظیمات شبکه خود را پیکربندی کنید.

### ساختار سایت

انتخاب کنید که سایت‌های شبکه شما چگونه سازمان‌دهی شوند:

- **زیردامنه** (پیشنهادی) — سایت‌ها زیردامنه مخصوص خود را دریافت می‌کنند، مثلاً `site1.yourdomain.com`
- **زیرپوشه** — سایت‌ها به صورت مسیر ایجاد می‌شوند، مثلاً `yourdomain.com/site1`

:::note
اگر زیردامنه را انتخاب کنید، باید **DNS عمومی (wildcard)** و یک **گواهی SSL عمومی** برای دامنه خود پیکربندی کنید. بیشتر میزبان‌های مدیریت‌شده WordPress این کار را به صورت خودکار انجام می‌دهند. برای مقایسه دقیق‌تر به [آموزش مقدماتی Ultimate Multisite](./ultimate-multisite-101) مراجعه کنید.
:::

### عنوان شبکه

یک نام برای شبکه خود وارد کنید. این به صورت پیش‌فرض عنوان سایت فعلی شما با افزودن کلمه "Network" است. می‌توانید بعداً از تنظیمات شبکه آن را تغییر دهید.

### ایمیل مدیر شبکه

آدرس ایمیلی که برای اعلان‌های مدیریت شبکه استفاده می‌شود. این به صورت پیش‌فرض آدرس ایمیل کاربر فعلی است.

![راهنمای راه‌اندازی چندسایتی - پیکربندی شبکه](/img/installation/multisite-wizard/wizard-network-configuration.png)

پس از پر کردن فیلدها، برای ادامه روی **Continue** کلیک کنید.

## مرحله ۳: نصب

برای شروع روی دکمه **Install** کلیک کنید. راهنما پنج مرحله خودکار را به ترتیب انجام می‌دهد و پیشرفت هر کدام را به صورت لحظه‌ای نمایش می‌دهد:

![راهنمای راه‌اندازی چندسایتی - نصب در انتظار](/img/installation/multisite-wizard/wizard-installation-pending.png)

| مرحله | توضیحات |
|------|-------------|
| **Enable Multisite** | ثابت `WP_ALLOW_MULTISITE` را به `wp-config.php` اضافه می‌کند |
| **Create Network** | جداول پایگاه داده چندسایتی (`wp_site`، `wp_sitemeta`، `wp_blogs` و غیره) را ایجاد کرده و با پیکربندی شبکه شما پر می‌کند |
| **Update Configuration** | ثابت‌های نهایی چندسایتی را به `wp-config.php` اضافه می‌کند (`MULTISITE`، `SUBDOMAIN_INSTALL`، `DOMAIN_CURRENT_SITE` و غیره) |
| **Fix Cookies** | اطمینان حاصل می‌کند که URL سایت در متادیتای شبکه صحیح است تا از مشکلات احراز هویت پس از فعال‌سازی جلوگیری شود |
| **Network Activate Plugin** | Ultimate Multisite را به صورت شبکه‌ای فعال می‌کند تا در کل شبکه اجرا شود |

هر مرحله یکی از این وضعیت‌ها را نمایش می‌دهد:

- **Pending** — در انتظار پردازش
- **Installing...** — در حال اجرا
- **Success!** — با موفقیت تکمیل شد
- **پیام خطا** — خطایی رخ داده است (پیام مشکل را توضیح می‌دهد)

پس از تکمیل موفقیت‌آمیز همه مراحل، برای هر مورد وضعیت سبز "Success!" را خواهید دید:

![راهنمای راه‌اندازی چندسایتی - نصب کامل شد](/img/installation/multisite-wizard/wizard-installation-complete.png)

سپس راهنما به صورت خودکار به صفحه تکمیل می‌رود.

## مرحله ۴: تکمیل

پس از اتمام نصب، یک پیام موفقیت می‌بینید که تأیید می‌کند WordPress Multisite فعال شده است.

![راهنمای راه‌اندازی چندسایتی - راه‌اندازی کامل شد](/img/installation/multisite-wizard/wizard-complete.png)

اکنون می‌توانید با راهنمای راه‌اندازی Ultimate Multisite ادامه دهید تا پلتفرم WaaS خود را پیکربندی کنید (جزئیات شرکت، محتوای پیش‌فرض، درگاه‌های پرداخت و غیره).

:::note
پس از اتمام نصب چندسایتی، مرورگر شما از طریق پنل مدیریت شبکه تازه فعال‌شده هدایت می‌شود. ممکن است نیاز باشد دوباره وارد شوید زیرا کوکی‌های احراز هویت برای محیط چندسایتی به‌روز می‌شوند.
:::

## راه‌اندازی دستی جایگزین

اگر راهنما نتواند در فایل `wp-config.php` شما بنویسد (به دلیل مجوزهای فایل یا محدودیت‌های سرور)، کد دقیقی که باید به صورت دستی اضافه کنید را نمایش می‌دهد:

1. **ثابت‌های wp-config.php** که باید بالای خط `/* That's all, stop editing! */` اضافه شوند
2. **قوانین بازنویسی .htaccess** متناسب با ساختار سایت انتخابی شما (زیردامنه یا زیرپوشه)

پس از انجام تغییرات دستی، صفحه را رفرش کنید و راهنما تشخیص خواهد داد که چندسایتی اکنون فعال است.

## عیب‌یابی

### راهنما می‌گوید wp-config.php قابل نوشتن نیست

فرآیند وب سرور شما نیاز به مجوز نوشتن روی فایل `wp-config.php` دارد. می‌توانید:

- به صورت موقت مجوزهای فایل را به `644` یا `666` تغییر دهید
- از دستورالعمل‌های راه‌اندازی دستی جایگزین که راهنما ارائه می‌دهد استفاده کنید
- از ارائه‌دهنده میزبانی خود کمک بخواهید

### سایت‌ها پس از راه‌اندازی قابل دسترسی نیستند (زیردامنه‌ها)

اگر ساختار زیردامنه را انتخاب کرده‌اید، باید **DNS عمومی** برای دامنه خود پیکربندی کنید. یک رکورد DNS اضافه کنید:

```
Type: A (or CNAME)
Host: *
Value: [your server IP]
```

اگر مطمئن نیستید چگونه این را پیکربندی کنید، با ارائه‌دهنده میزبانی خود چک کنید.

### مشکلات احراز هویت پس از راه‌اندازی

اگر پس از راه‌اندازی چندسایتی از سیستم خارج شدید یا خطاهای کوکی تجربه کردید:

1. کوکی‌های مرورگر خود را برای سایت پاک کنید
2. دوباره در `yourdomain.com/wp-login.php` وارد شوید
3. اگر مشکل ادامه داشت، بررسی کنید که `wp-config.php` شما `COOKIE_DOMAIN` را روی `false` تنظیم نکرده باشد — این یک مشکل شناخته‌شده در نصب‌های چندسایتی زیردامنه‌ای است

### یک مرحله در حین نصب با خطا مواجه شد

اگر یکی از مراحل نصب خطا نشان می‌دهد:

1. پیام خطای نمایش داده شده را یادداشت کنید
2. به مرحله پیکربندی برگردید و دوباره تلاش کنید
3. اگر خطا ادامه داشت، لاگ خطای PHP سرور خود را برای جزئیات بیشتر بررسی کنید
4. مراحلی که قبلاً تکمیل شده‌اند در اجراهای بعدی رد می‌شوند (نصب‌کننده بدون تکرار عمل می‌کند)
