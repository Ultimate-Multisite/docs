---
title: یکپارچه‌سازی ServerPilot
sidebar_position: 16
_i18n_hash: fdbdebe91bc1687b519dc0986de244d3
---
# یکپارچه‌سازی با ServerPilot

## معرفی
ServerPilot یک سرویس ابری برای میزبانی وردپرس و سایر وب‌سایت‌های PHP روی سرورهای DigitalOcean، Amazon، Google یا هر ارائه‌دهنده سرور دیگری است. این یکپارچه‌سازی امکان همگام‌سازی خودکار دامنه و مدیریت گواهی SSL بین Ultimate Multisite و ServerPilot را فراهم می‌کند.

## امکانات
- همگام‌سازی خودکار دامنه
- مدیریت گواهی SSL با Let's Encrypt
- تمدید خودکار SSL

## پیش‌نیازها
ثابت‌های زیر باید در فایل `wp-config.php` شما تعریف شوند:

```php
define('WU_SERVER_PILOT_CLIENT_ID', 'your_client_id');
define('WU_SERVER_PILOT_API_KEY', 'your_api_key');
define('WU_SERVER_PILOT_APP_ID', 'your_app_id');
```

## راهنمای راه‌اندازی

### ۱. دریافت اطلاعات API از ServerPilot

1. وارد داشبورد ServerPilot خود شوید
2. به بخش "Account" > "API" بروید
3. اگر کلید API ندارید، یک کلید جدید بسازید
4. Client ID و API Key خود را کپی کنید

### ۲. دریافت App ID

1. در داشبورد ServerPilot، به بخش "Apps" بروید
2. اپلیکیشنی که وردپرس چندسایته شما روی آن میزبانی می‌شود را انتخاب کنید
3. App ID در آدرس URL قابل مشاهده است: `https://manage.serverpilot.io/apps/{APP_ID}`

### ۳. افزودن ثابت‌ها به wp-config.php

ثابت‌های زیر را به فایل `wp-config.php` خود اضافه کنید:

```php
define('WU_SERVER_PILOT_CLIENT_ID', 'your_client_id');
define('WU_SERVER_PILOT_API_KEY', 'your_api_key');
define('WU_SERVER_PILOT_APP_ID', 'your_app_id');
```

### ۴. فعال‌سازی یکپارچه‌سازی

1. در پیشخوان وردپرس، به Ultimate Multisite > Settings بروید
2. به تب "Domain Mapping" بروید
3. به پایین اسکرول کنید تا به "Host Integrations" برسید
4. یکپارچه‌سازی ServerPilot را فعال کنید
5. روی "Save Changes" کلیک کنید

## نحوه کار

### همگام‌سازی دامنه

وقتی یک دامنه در Ultimate Multisite نگاشت می‌شود:

1. یکپارچه‌سازی لیست فعلی دامنه‌ها را از ServerPilot دریافت می‌کند
2. دامنه جدید را به لیست اضافه می‌کند (همراه با نسخه www در صورت لزوم)
3. لیست به‌روزشده را از طریق API به ServerPilot ارسال می‌کند
4. ServerPilot لیست دامنه‌های اپلیکیشن شما را به‌روزرسانی می‌کند

### مدیریت گواهی SSL

پس از همگام‌سازی دامنه‌ها:

1. یکپارچه‌سازی به‌صورت خودکار AutoSSL را برای اپلیکیشن شما فعال می‌کند
2. ServerPilot صدور و نصب گواهی SSL را با استفاده از Let's Encrypt انجام می‌دهد
3. ServerPilot همچنین تمدید خودکار گواهی‌های SSL را مدیریت می‌کند

## تأیید گواهی SSL

این یکپارچه‌سازی طوری پیکربندی شده که تعداد تلاش‌های تأیید گواهی SSL برای ServerPilot را افزایش دهد، زیرا ممکن است صدور و نصب گواهی SSL توسط ServerPilot کمی زمان ببرد. به‌صورت پیش‌فرض، تا ۵ بار تلاش می‌کند، اما می‌توانید این مقدار را با استفاده از فیلترها تنظیم کنید.

## عیب‌یابی

### مشکلات اتصال به API
- مطمئن شوید که Client ID و API Key شما صحیح هستند
- بررسی کنید که App ID شما درست باشد
- اطمینان حاصل کنید که حساب ServerPilot شما مجوزهای لازم را دارد

### مشکلات گواهی SSL
- ServerPilot نیاز دارد که دامنه‌ها قبل از صدور گواهی SSL، رکوردهای DNS معتبری داشته باشند که به سرور شما اشاره کنند
- اگر گواهی‌های SSL صادر نمی‌شوند، بررسی کنید که دامنه‌های شما به‌درستی به آدرس IP سرورتان اشاره می‌کنند
- صدور و نصب گواهی SSL توسط ServerPilot ممکن است کمی زمان ببرد (معمولاً ۵ تا ۱۵ دقیقه)

### دامنه اضافه نشده است
- لاگ‌های Ultimate Multisite را برای پیام‌های خطا بررسی کنید
- مطمئن شوید که دامنه قبلاً به ServerPilot اضافه نشده باشد
- اطمینان حاصل کنید که پلن ServerPilot شما از تعداد دامنه‌هایی که می‌خواهید اضافه کنید پشتیبانی می‌کند

### حذف دامنه
- در حال حاضر، API مربوط به ServerPilot امکان حذف دامنه‌های جداگانه را ندارد
- وقتی یک نگاشت دامنه در Ultimate Multisite حذف می‌شود، یکپارچه‌سازی لیست دامنه‌ها را در ServerPilot به‌روزرسانی می‌کند تا دامنه حذف‌شده را شامل نشود
